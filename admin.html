<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>AI SMART ADMIN v3.5 | TOTAL AUTOMATION</title>
    <style>
        body { background:#0a0a0a; color:#eee; font-family: 'Segoe UI', sans-serif; display:flex; justify-content:center; align-items:center; min-height:100vh; margin:0; }
        .box { background:#111; padding:35px; border-radius:15px; border:2px solid #f39c12; width:550px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        h2 { color:#f39c12; text-align:center; margin-top:0; letter-spacing: 1px; }
        input, textarea, button { width:100%; padding:14px; margin:10px 0; border-radius:8px; box-sizing: border-box; outline:none; }
        input, textarea { background:#1a1a1a; border:1px solid #333; color:white; }
        button { background:#27ae60; color:white; border:none; font-weight:bold; cursor:pointer; font-size:16px; transition:0.3s; }
        button:hover { background:#2ecc71; }
        button:disabled { background:#555; cursor:not-allowed; }
        #log { font-size:12px; color:#aaa; max-height:180px; overflow-y:auto; background:#000; padding:12px; border: 1px solid #222; border-radius:5px; margin-top:10px; }
    </style>
</head>
<body>
    <div class="box">
        <h2>AI SMART UPLOAD SYSTEM</h2>
        <input type="password" id="tk" placeholder="GitHub Personal Access Token">
        <input type="file" id="fi" multiple accept=".jpg,.eps">
        <textarea id="desc" rows="3" placeholder="Özel açıklama (Boş bırakırsanız AI 10 kalıptan birini yazar)"></textarea>
        <button id="btn" onclick="startProcess()">DOSYALARI İŞLE VE YÜKLE</button>
        <div id="log">Sistem hazır. 30+ Kategori ve 10 AI Kalıbı Aktif.</div>
    </div>

<script>
    const catKeywords = {
        "abstract": "abstract, background, pattern, texture, modern, artistic, creative, colorful, shape, geometric, wave, line, futuristic, minimal, art, style, trendy, decoration, composition, element, digital, light, gradient, flow, concept, vector, illustration, graphic, design, isolated, eps, flat-design, clip-art, digital-art, stock, premium, commercial, high-quality, professional, template",
        "animals": "animal, pet, wild, nature, mammal, bird, cat, dog, lion, tiger, zoo, wildlife, fauna, creature, mascot, character, cute, adorable, biological, species, domestic, paw, fur, safari, jungle, forest, vector, illustration, graphic, design, isolated, eps",
        "arts": "arts, artistic, paint, brush, creative, museum, gallery, canvas, drawing, sketch, culture, history, craft, masterpiece, sculpture, classic, modern-art, oil-paint, watercolor, fine-art, vector, illustration, graphic, design, isolated, eps",
        "backgrounds": "background, texture, wallpaper, surface, backdrop, abstract, pattern, material, empty, space, layout, scene, environment, decorative, graphic-element, clean, simple, light, dark, vector, illustration, graphic, design, isolated, eps",
        "beauty": "beauty, fashion, cosmetic, makeup, skincare, spa, hair, model, style, glamour, elegant, female, girl, woman, wellness, salon, treatment, face, organic, luxury, vector, illustration, graphic, design, isolated, eps",
        "buildings": "buildings, architecture, city, house, urban, skyscraper, apartment, construction, home, exterior, real-estate, street, downtown, structure, facade, landmark, vector, illustration, graphic, design, isolated, eps",
        "business": "business, corporate, office, work, professional, success, team, finance, marketing, strategy, management, career, worker, company, meeting, growth, technology, icon, economy, leadership, communication, partnership, vector, illustration, eps",
        "food": "food, meal, dish, fresh, healthy, organic, delicious, tasty, nutrition, cooking, kitchen, restaurant, gourmet, menu, appetizer, ingredient, lunch, dinner, breakfast, snack, diet, vegetarian, homemade, spicy, sweet, vector, illustration, eps",
        "nature": "nature, landscape, outdoor, green, environment, sky, mountain, forest, tree, water, river, lake, summer, spring, autumn, winter, scenic, view, plant, leaf, garden, flower, wild, park, wood, vector, illustration, graphic, design, eps",
        "sports": "sport, fitness, training, athlete, gym, workout, active, competition, healthy, lifestyle, exercise, ball, team, winner, stadium, fast, power, speed, muscle, physical, activity, running, football, vector, illustration, eps",
        "technology": "technology, digital, innovation, future, computer, web, software, tech, science, internet, network, modern, connection, electronic, robot, ai, intelligence, virtual, coding, vector, illustration, eps"
    };

    const genericPool = "vector, illustration, graphic, design, isolated, eps, flat-design, clip-art, digital-art, stock, premium, commercial, high-quality, professional, template, simple, modern, creative, artistic, collection, resource";

    function generateAIDescription(name, cat) {
        const templates = [
            `Professional ${name} vector illustration. This high-quality ${cat} graphic is designed for modern projects.`,
            `A creative ${name} element perfect for your ${cat} themed designs. Scalable vector for web and print.`,
            `Premium ${cat} resource featuring ${name}. Ideal for marketing and professional presentations.`,
            `Enhance your projects with this ${name} illustration. Versatile addition to our ${cat} collection.`,
            `Detailed ${name} vector graphic for commercial use. Meticulously crafted for ${cat} designs.`,
            `Modern and stylish ${name} design element. Perfect for social media and ${cat} website headers.`,
            `High-resolution ${name} vector illustration providing a professional look for your ${cat} layout.`,
            `Top-tier ${name} graphic, ready for download. Perfectly categorized under ${cat} for easy access.`,
            `A unique ${name} illustration that stands out. Designed specifically for the ${cat} niche.`,
            `Professional-grade ${name} vector, curated for our premium ${cat} archive. Excellent for branding.`
        ];
        return templates[Math.floor(Math.random() * 10)];
    }

    async function startProcess() {
        const token = document.getElementById('tk').value;
        const files = Array.from(document.getElementById('fi').files);
        const log = document.getElementById('log');
        
        if(!token || files.length === 0) return alert("Hata: Token veya dosyalar eksik!");
        
        document.getElementById('btn').disabled = true;
        log.innerHTML = "<b>İşlem başladı...</b>";

        const jpegs = files.filter(f => f.name.toLowerCase().endsWith('.jpg'));
        
        for (let jpg of jpegs) {
            let base = jpg.name.split('.')[0];
            let clean = base.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '').replace(/-+/g, '-');
            let folder = `${clean}-${Math.floor(10000 + Math.random() * 90000)}`;

            let categoryFound = "general";
            let selectedKeys = genericPool;
            for (let cat in catKeywords) {
                if (clean.includes(cat)) {
                    selectedKeys = catKeywords[cat];
                    categoryFound = cat;
                    break;
                }
            }

            let finalDesc = document.getElementById('desc').value || generateAIDescription(clean.replace(/-/g, ' '), categoryFound);
            const eps = files.find(f => f.name.split('.')[0] === base && f.name.toLowerCase().endsWith('.eps'));

            if (eps) {
                log.innerHTML += `<div>⚙️ Yükleniyor: ${folder}</div>`;
                try {
                    await uploadToGithub(folder, jpg, `${folder}.jpg`, token);
                    await uploadToGithub(folder, eps, `${folder}.eps`, token);
                    await updateJSONList({ name: folder, desc: finalDesc, keys: selectedKeys }, token);
                    log.innerHTML += `<div style="color:#27ae60">✓ Başarılı: ${folder}</div>`;
                } catch (e) {
                    log.innerHTML += `<div style="color:red">X Hata: ${e.message}</div>`;
                }
            }
        }
        log.innerHTML += "<div><b>TAMAMLANDI!</b></div>";
        document.getElementById('btn').disabled = false;
    }

    async function uploadToGithub(fld, file, name, tk) {
        const b64 = await toBase64(file);
        const url = `https://api.github.com/repos/free-vector-stock/free-vector-stock/contents/vectors/${fld}/${name}`;
        const res = await fetch(url, {
            method: 'PUT',
            headers: { 'Authorization': `token ${tk}` },
            body: JSON.stringify({ message: `Add ${name}`, content: b64.split(',')[1] })
        });
        if(!res.ok) throw new Error(`${name} yüklenemedi.`);
    }

    async function updateJSONList(newData, tk) {
        const url = `https://api.github.com/repos/free-vector-stock/free-vector-stock/contents/vectors.json`;
        const res = await fetch(url);
        const f = await res.json();
        let list = [];
        try {
            list = JSON.parse(atob(f.content));
        } catch(e) {
            list = []; // JSON bozuksa sıfırla
        }
        list.unshift(newData);
        await fetch(url, {
            method: 'PUT',
            headers: { 'Authorization': `token ${tk}` },
            body: JSON.stringify({ message: `Update`, content: btoa(JSON.stringify(list, null, 2)), sha: f.sha })
        });
    }

    const toBase64 = f => new Promise((res, rej) => {
        const r = new FileReader(); r.readAsDataURL(f);
        r.onload = () => res(r.result); r.onerror = e => rej(e);
    });
</script>
</body>
</html>
