<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | Free Vector Stock</title>
    <style>
        body { background: #0f0f0f; color: #ffffff; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .upload-box { background: #1a1a1a; padding: 40px; border-radius: 20px; border: 2px solid #f39c12; width: 400px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.7); }
        h2 { color: #f39c12; margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }
        input[type="text"], input[type="file"] { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #252525; color: white; box-sizing: border-box; }
        .btn { background: #f39c12; color: #000; border: none; padding: 15px; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 16px; transition: 0.3s; margin-top: 15px; }
        .btn:hover { background: #e67e22; transform: scale(1.02); }
        #status { margin-top: 20px; font-size: 14px; color: #aaa; min-height: 20px; }
        .info-text { font-size: 12px; color: #666; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="upload-box">
    <h2>Vektör Yükle</h2>
    <p class="info-text">Aynı isme sahip 1 EPS ve 1 JPG seçiniz.</p>
    
    <input type="text" id="token" placeholder="GitHub Token (ghp_...)" />
    <input type="text" id="title" placeholder="Tasarım Başlığı (Örn: kahve-logosu)" />
    <input type="file" id="fileInput" multiple />
    
    <button class="btn" onclick="uploadToGithub()">SİSTEME GÖNDER</button>
    
    <div id="status"></div>
</div>

<script>
    async function uploadToGithub() {
        const token = document.getElementById('token').value;
        const title = document.getElementById('title').value.trim().replace(/\s+/g, '-').toLowerCase();
        const files = document.getElementById('fileInput').files;
        const status = document.getElementById('status');

        if (!token || !title || files.length < 2) {
            status.innerHTML = "❌ Lütfen tüm alanları doldurun ve 2 dosya seçin.";
            return;
        }

        status.innerHTML = "⏳ Yükleniyor, lütfen bekleyin...";

        const OWNER = 'hakankacar2014-demir';
        const REPO = 'free-vector-stock';

        for (let file of files) {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async () => {
                const content = reader.result.split(',')[1];
                const path = `vectors/${title}/${file.name}`;
                
                try {
                    const response = await fetch(`https://api.github.com/repos/${OWNER}/${REPO}/contents/${path}`, {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: `Yeni Vektör: ${title}`,
                            content: content
                        })
                    });

                    if (response.ok) {
                        status.innerHTML = "✅ Başarıyla yüklendi! Vitrini kontrol edebilirsiniz.";
                    } else {
                        const errData = await response.json();
                        status.innerHTML = `❌ Hata: ${errData.message}`;
                    }
                } catch (error) {
                    status.innerHTML = "❌ Bağlantı hatası oluştu.";
                }
            };
        }
    }
</script>

</body>
</html>
