<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bulk Upload Panel</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .box { background: #111; padding: 40px; border-radius: 20px; border: 2px solid #f39c12; width: 400px; text-align: center; }
        input { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #222; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; margin-top: 10px; }
        .btn-up { background: #27ae60; color: #fff; }
    </style>
</head>
<body>
    <div class="box">
        <h2 style="color:#f39c12">BULK UPLOAD</h2>
        <input type="password" id="tk" placeholder="GitHub Token">
        <input type="file" id="fl" multiple accept=".jpg,.eps">
        <button class="btn-up" onclick="start()">START UPLOAD</button>
        <div id="log" style="margin-top:20px; font-size:12px; color:#aaa;"></div>
    </div>
    <script>
        async function start() {
            const tk = document.getElementById('tk').value;
            const fls = Array.from(document.getElementById('fl').files);
            const log = document.getElementById('log');
            const jpgs = fls.filter(f => f.name.toLowerCase().endsWith('.jpg'));
            for(let j of jpgs) {
                const name = j.name.split('.')[0];
                const folder = name.toLowerCase().replace(/\s+/g, '-');
                const e = fls.find(f => f.name.split('.')[0] === name && f.name.toLowerCase().endsWith('.eps'));
                if(e) {
                    await up(j, folder, tk); await up(e, folder, tk);
                    log.innerHTML += `Uploaded: ${folder}<br>`;
                }
            }
        }
        async function up(f, fld, tk) {
            const r = new FileReader(); r.readAsDataURL(f);
            return new Promise(res => { r.onload = async () => {
                const c = r.result.split(',')[1];
                const resp = await fetch(`https://api.github.com/repos/free-vector-stock/free-vector-stock/contents/vectors/${fld}/${f.name}`, {
                    method: 'PUT', headers: { 'Authorization': `token ${tk}` },
                    body: JSON.stringify({ message: `Add ${fld}`, content: c })
                });
                res(resp.ok);
            };});
        }
    </script>
</body>
</html>
