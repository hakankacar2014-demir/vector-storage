<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Vector Stock | Fixed Edition</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Segoe UI', sans-serif; text-align: center; margin: 0; padding: 20px; }
        h1 { color: #f39c12; text-transform: uppercase; margin: 25px 0; font-size: 26px; letter-spacing: 2px; }
        .search-container { margin-bottom: 30px; }
        #searchInput { width: 90%; max-width: 600px; padding: 15px 25px; border-radius: 30px; border: 2px solid #222; background: #111; color: #fff; font-size: 16px; outline: none; transition: 0.3s; }
        #searchInput:focus { border-color: #f39c12; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 25px; max-width: 1300px; margin: 0 auto; }
        .card { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 20px; border-radius: 15px; display: flex; flex-direction: column; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); border-color: #f39c12; }
        .img-box { width: 100%; height: 180px; background: #050505; border-radius: 10px; display: flex; align-items: center; justify-content: center; overflow: hidden; margin-bottom: 15px; }
        .img-box img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .card-title { color: #f39c12; font-size: 13px; font-weight: bold; margin-bottom: 15px; text-transform: uppercase; min-height: 35px; display: flex; align-items: center; justify-content: center; }
        .btn { background: #f39c12; color: #000; padding: 12px; border: none; border-radius: 8px; font-weight: 800; cursor: pointer; text-transform: uppercase; font-size: 12px; transition: 0.2s; }
        .btn:hover { background: #ffb133; }
        .pagination { margin: 50px 0; display: flex; justify-content: center; gap: 10px; }
        .page-btn { background: #111; color: #fff; border: 1px solid #333; padding: 10px 18px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .page-btn.active { background: #f39c12; color: #000; border-color: #f39c12; }
    </style>
</head>
<body>

    <h1>FREE VECTOR STOCK</h1>

    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search vectors..." onkeyup="doSearch()">
    </div>

    <div id="gallery" class="gallery">Loading...</div>
    <div id="pagination" class="pagination"></div>

    <script>
        const OWNER = 'free-vector-stock';
        const REPO = 'free-vector-stock';
        const PER_PAGE = 12;

        let allData = [];
        let filteredData = [];
        let curPage = 1;

        async function start() {
            try {
                const r = await fetch('vectors.json?t=' + Date.now());
                allData = await r.json();
                allData.reverse();
                filteredData = [...allData];
                showPage(1);
            } catch (e) { document.getElementById('gallery').innerText = "JSON Error!"; }
        }

        function showPage(p) {
            curPage = p;
            const gal = document.getElementById('gallery');
            gal.innerHTML = '';
            
            const startIdx = (p - 1) * PER_PAGE;
            const items = filteredData.slice(startIdx, startIdx + PER_PAGE);

            items.forEach(folderName => {
                // Parantez gibi özel karakterleri tarayıcıya uygun hale getiriyoruz
                const encName = encodeURIComponent(folderName);
                // jsDelivr CDN kullanarak hızı artırıyoruz
                const imgPath = `https://cdn.jsdelivr.net/gh/${OWNER}/${REPO}/vectors/${encName}/${encName}.jpg`;
                const epsPath = `https://raw.githubusercontent.com/${OWNER}/${REPO}/main/vectors/${encName}/${encName}.eps`;

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="img-box">
                        <img src="${imgPath}" onerror="this.src='https://via.placeholder.com/300x200/111/f39c12?text=Image+Not+Ready'">
                    </div>
                    <div class="card-title">${folderName.replace(/-/g, ' ')}</div>
                    <button class="btn" onclick="downloadEps('${epsPath}', '${folderName}.eps')">DOWNLOAD EPS</button>
                `;
                gal.appendChild(card);
            });
            drawPagination();
        }

        function doSearch() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            filteredData = allData.filter(x => x.toLowerCase().includes(q));
            showPage(1);
        }

        function drawPagination() {
            const pag = document.getElementById('pagination');
            const total = Math.ceil(filteredData.length / PER_PAGE);
            pag.innerHTML = '';
            if(total <= 1) return;
            for(let i=1; i<=total; i++) {
                const b = document.createElement('button');
                b.className = `page-btn ${i === curPage ? 'active' : ''}`;
                b.innerText = i;
                b.onclick = () => { window.scrollTo(0,0); showPage(i); };
                pag.appendChild(b);
            }
        }

        async function downloadEps(url, name) {
            try {
                const r = await fetch(url);
                const b = await r.blob();
                const a = document.createElement('a');
                a.href = URL.createObjectURL(b);
                a.download = name;
                a.click();
            } catch (e) { alert("Download failed. GitHub is processing the file."); }
        }

        start();
    </script>
</body>
</html>
