<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Vector Stock | Ultimate Edition</title>
    <style>
        :root { --accent: #f39c12; --bg: #000; --card-bg: #0a0a0a; }
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; text-align: center; margin: 0; padding: 20px; }
        h1 { color: var(--accent); text-transform: uppercase; letter-spacing: 4px; margin: 30px 0; font-size: 28px; }
        
        .gallery { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); 
            gap: 25px; 
            max-width: 1400px; 
            margin: 0 auto; 
            padding: 20px;
        }

        .card { 
            background: var(--card-bg); 
            border: 1px solid #1a1a1a; 
            padding: 20px; 
            border-radius: 16px; 
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            display: flex; 
            flex-direction: column;
        }
        .card:hover { border-color: var(--accent); transform: translateY(-10px); box-shadow: 0 10px 30px rgba(243, 156, 18, 0.1); }

        .img-box { 
            width: 100%; 
            height: 200px; 
            background: #050505; 
            border-radius: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            overflow: hidden; 
            margin-bottom: 15px;
        }
        .img-box img { max-width: 90%; max-height: 90%; object-fit: contain; transition: 0.3s; }

        .card-title { 
            color: var(--accent); 
            font-size: 13px; 
            font-weight: 700; 
            margin-bottom: 15px; 
            text-transform: uppercase; 
            min-height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn { 
            background: var(--accent); 
            color: #000; 
            padding: 14px; 
            border: none; 
            border-radius: 8px; 
            font-weight: 900; 
            cursor: pointer; 
            text-decoration: none; 
            font-size: 13px; 
            transition: 0.2s;
        }
        .btn:hover { background: #ffb133; transform: scale(1.03); }
        
        #loader { font-weight: bold; color: var(--accent); margin-top: 50px; }
    </style>
</head>
<body>

    <h1>FREE VECTOR STOCK</h1>

    <div id="loader">Database Loading...</div>
    <div id="gallery" class="gallery"></div>

    <script>
        const OWNER = 'free-vector-stock';
        const REPO = 'free-vector-stock';

        async function init() {
            try {
                const r = await fetch('vectors.json?nocache=' + Date.now());
                const items = await r.json();
                document.getElementById('loader').style.display = 'none';
                render(items.reverse());
            } catch (e) {
                document.getElementById('loader').innerText = "Error: Database not found!";
            }
        }

        function render(data) {
            const gal = document.getElementById('gallery');
            gal.innerHTML = '';

            data.forEach(name => {
                const enc = encodeURIComponent(name);
                
                // image_c5b605.png ve image_c61472.jpg'deki tüm karmaşık yolları tarar:
                // 1. Yol: vectors/AD/AD.jpg (Standart)
                // 2. Yol: vectors/1/AD.jpg (Görüntüdeki "1" klasörü)
                // 3. Yol: vectors/AD.jpg (Doğrudan klasörsüz)
                const imgPaths = [
                    `https://cdn.jsdelivr.net/gh/${OWNER}/${REPO}/vectors/${enc}/${enc}.jpg`,
                    `https://cdn.jsdelivr.net/gh/${OWNER}/${REPO}/vectors/1/${enc}.jpg`,
                    `https://cdn.jsdelivr.net/gh/${OWNER}/${REPO}/vectors/${enc}.jpg`
                ];

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="img-box">
                        <img src="${imgPaths[0]}" onerror="tryNext(this, ${JSON.stringify(imgPaths)})">
                    </div>
                    <div class="card-title">${name.replace(/-/g, ' ')}</div>
                    <button class="btn" onclick="downloadEps('${name}')">DOWNLOAD EPS</button>
                `;
                gal.appendChild(card);
            });
        }

        function tryNext(img, paths) {
            let currentIdx = paths.indexOf(img.src);
            if (currentIdx < paths.length - 1) {
                img.src = paths[currentIdx + 1];
            } else {
                img.src = 'https://via.placeholder.com/300x200/111/f39c12?text=Preview+Not+Found';
                img.onerror = null;
            }
        }

        async function downloadEps(name) {
            const enc = encodeURIComponent(name);
            const epsPaths = [
                `https://raw.githubusercontent.com/${OWNER}/${REPO}/main/vectors/${enc}/${enc}.eps`,
                `https://raw.githubusercontent.com/${OWNER}/${REPO}/main/vectors/1/${enc}.eps`,
                `https://raw.githubusercontent.com/${OWNER}/${REPO}/main/vectors/${enc}.eps`
            ];

            for (let path of epsPaths) {
                try {
                    const res = await fetch(path, { method: 'HEAD' });
                    if (res.ok) {
                        window.open(path, '_blank');
                        return;
                    }
                } catch (e) {}
            }
            alert("File is still being processed by GitHub. Please wait 1 minute.");
        }

        init();
    </script>
</body>
</html>
